# mqtop Configuration
# Copy this file to config.toml and edit with your settings

[mqtt]
# ============================================================================
# MQTT Broker Connections
# ============================================================================

# Active server name (must match a server below)
active_server = "default"

[[mqtt.servers]]
# Unique name for this server
name = "default"

# Broker hostname
host = "mqtt.example.com"

# Broker port (typically 1883 for plain, 8883 for TLS)
port = 8883

# Enable TLS/SSL encryption
use_tls = true

# ============================================================================
# TLS Certificate Options (Optional)
# ============================================================================

# Custom CA certificate (PEM format) - for self-signed or private CA
# ca_cert = "/path/to/ca.pem"

# Client certificate and key for mTLS authentication
# client_cert = "/path/to/client.pem"
# client_key = "/path/to/client-key.pem"

# Skip TLS certificate verification (INSECURE - for testing only!)
# tls_insecure = false

# ============================================================================
# Authentication
# ============================================================================

# Client ID - unique identifier for this connection
# Also used as username if username is not explicitly set
client_id = "mqtop-explorer"

# If true, use client_id exactly as specified (for persistent sessions/auth)
# If false (default), a timestamp suffix is added for reconnect safety
# use_exact_client_id = false

# Username for MQTT authentication
# If not set, defaults to client_id
# username = "your-username"

# Authentication token (password field)
# Stored in config (plain text)
# token = "your-jwt-token-here"

# ============================================================================
# Subscription
# ============================================================================

# Topic pattern to subscribe to
# Supports MQTT wildcards:
#   # = multi-level wildcard (matches any number of levels)
#   + = single-level wildcard (matches exactly one level)
#
# Examples:
#   "#"                      - All topics (default)
#   "sensors/#"              - All sensor data
#   "sensors/+/temperature"  - Temperature from any device
#   "building/+/floor/#"     - All data from any floor
subscribe_topic = "#"

# QoS level for subscriptions (0, 1, or 2)
# 0 = At most once, 1 = At least once (default), 2 = Exactly once
# subscribe_qos = 1

# Keep-alive interval in seconds
# Broker will disconnect if no packets received within 1.5x this interval
keep_alive_secs = 30

# ============================================================================
# Session Options
# ============================================================================

# Clean session - if true (default), broker discards previous session state
# Set to false for persistent subscriptions and queued messages
# clean_session = true

# MQTT protocol version: 3 = MQTT 3.1.1 (default), 5 = MQTT 5.0
# Note: MQTT 5.0 support is planned but not yet implemented
# mqtt_version = 3

# ============================================================================
# Last Will and Testament (Optional)
# ============================================================================
# Message published by broker if client disconnects unexpectedly

# lwt_topic = "clients/mqtop/status"
# lwt_payload = "offline"
# lwt_qos = 1
# lwt_retain = true

[ui]
# ============================================================================
# User Interface Settings
# ============================================================================

# Number of messages to buffer per topic
# Higher values use more memory but allow scrolling through history
message_buffer_size = 100

# Time window for rate calculations (messages/sec, bytes/sec)
# Shorter windows are more responsive, longer windows are smoother
stats_window_secs = 10

# UI refresh rate in milliseconds
# Lower values = smoother updates but higher CPU usage
# Recommended: 50-200ms
tick_rate_ms = 100

# ============================================================================
# Topic Colors (Optional)
# ============================================================================
# Customize topic highlighting in the tree view.
# Topics matching a pattern will be displayed in the specified color.
# Patterns are case-insensitive and match segment names or path prefixes.
#
# Available colors:
#   red, green, blue, yellow, cyan, magenta, white, gray
#   light_red, light_green, light_blue, light_yellow, light_cyan, light_magenta
#
# Examples:
# [[ui.topic_colors]]
# pattern = "sensors"
# color = "cyan"
#
# [[ui.topic_colors]]
# pattern = "alerts"
# color = "red"
#
# [[ui.topic_colors]]
# pattern = "status"
# color = "green"

# ============================================================================
# Topic Categories (Optional)
# ============================================================================
# Count topics by category in the Stats panel.
# Useful for monitoring different parts of your topic hierarchy.
# Patterns are case-insensitive and match anywhere in the topic path.
#
# Examples:
# [[ui.topic_categories]]
# label = "Sensors"
# pattern = "sensors"
# color = "cyan"
#
# [[ui.topic_categories]]
# label = "Alerts"
# pattern = "alerts"
# color = "red"
#
# [[ui.topic_categories]]
# label = "Devices"
# pattern = "devices"
# color = "green"
